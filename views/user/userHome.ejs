<%- include('../layouts/header.ejs') %>

    <body>
        <div class="page-wrapper">
            <header class="header header-intro-clearance header-4">
                <div class="header-top">
                    <div class="container">
                        <div class="header-left">
                            <a href="tel:#"><i class="icon-phone"></i>Call: +0123 456 789</a>
                        </div><!-- End .header-left -->

                        <div class="header-right">

                            <ul class="top-menu">
                                <li>
                                    <a href="#">Links</a>
                                    <% if(typeof user =='undefined' ){ %>
                                    <ul>
                                        <li><a href="#signin-modal" data-toggle="modal">Sign in / Sign up</a></li>
                                    </ul>
                                    <% } else {%>
                                        <ul>
                                            <li><a href="/logout" ">Log out</a></li>
                                        <li><a href="#profile" data-toggle="modal"><%= user.user_name %></a></li>
                                    </ul>
                                    <% } %>
                                </li>
                            </ul><!-- End .top-menu -->
                        </div><!-- End .header-right -->

                    </div><!-- End .container -->
                </div><!-- End .header-top -->


                <!-- login and registration start -->


                <div class="modal fade" id="signin-modal" tabindex="-1" role="dialog" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-body">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true"><i class="icon-close"></i></span>
                                </button>

                                <div class="form-box">
                                    <div class="form-tab">
                                        <ul class="nav nav-pills nav-fill nav-border-anim" role="tablist">
                                            <li class="nav-item">
                                                <a class="nav-link active" id="signin-tab" data-toggle="tab"
                                                    href="#signin" role="tab" aria-controls="signin"
                                                    aria-selected="true">Sign In</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" id="register-tab" data-toggle="tab" href="#register"
                                                    role="tab" aria-controls="register"
                                                    aria-selected="false">Register</a>
                                            </li>
                                        </ul>
                                        <div class="tab-content" id="tab-content-5">
                                            <div class="tab-pane fade show active" id="signin" role="tabpanel"
                                                aria-labelledby="signin-tab">
                                                <form action="/signin" method="POST" id="login-form">
                                                    <div class="form-group">
                                                        <label for="singin-email">Username or email address *</label>
                                                        <input type="text" class="form-control" id="singin-email"
                                                            name="signin-email" required>
                                                    </div><!-- End .form-group -->

                                                    <div class="form-group">
                                                        <label for="singin-password">Password *</label>
                                                        <input type="password" class="form-control" id="singin-password"
                                                            name="signin-password" required>
                                                    </div><!-- End .form-group -->

                                                    <div class="form-footer">
                                                        <button type="submit" class="btn btn-outline-primary-2">
                                                            <span>LOG IN</span>
                                                            <i class="icon-long-arrow-right"></i>
                                                        </button>


                                                        <a href="#" class="forgot-link">Forgot Your Password?</a>
                                                    </div><!-- End .form-footer -->
                                                </form>
                                                <div class="form-choice">
                                                    <p class="text-center">or sign in with</p>
                                                    <div class="row justify-content-center">
                                                        <div class="col-sm-6">
                                                            <a href='/auth/google' class="btn btn-login btn-g">
                                                                <i class="icon-google"></i>
                                                                Login With Google
                                                            </a>
                                                        </div><!-- End .col-6 -->
                                                        <!-- End .col-6 -->
                                                    </div><!-- End .row -->
                                                </div><!-- End .form-choice -->
                                            </div><!-- .End .tab-pane -->





                                            <div class="tab-pane fade" id="register" role="tabpanel"
                                                aria-labelledby="register-tab">
                                                <form action="/signup" method="POST" id="signup-form">
                                                    <div class="form-group">
                                                        <div class="form-group">
                                                            <label for="register-phone">User name *</label>
                                                            <input type="text" class="form-control" id="register-name"
                                                                name="register-name" required>
                                                        </div>
                                                        <label for="register-email">Your email address *</label>
                                                        <input type="email" class="form-control" id="register-email"
                                                            name="register-email" required>
                                                    </div><!-- End .form-group -->
                                                    <div class="form-group">
                                                        <label for="register-phone">Password *</label>
                                                        <input type="text" class="form-control" id="register-password0"
                                                            name="register-password0" required>
                                                    </div>

                                                    <div class="form-group">
                                                        <label for="register-password">Confirm password *</label>
                                                        <input type="password" class="form-control"
                                                            id="register-password" name="register-password" required>
                                                    </div><!-- End .form-group -->

                                                    <div class="form-footer">
                                                        <button type="submit" class="btn btn-outline-primary-2">
                                                            <span>SIGN UP</span>
                                                            <i class="icon-long-arrow-right"></i>
                                                        </button>
                                                    </div><!-- End .form-footer -->
                                                </form>
                                                
                                            </div><!-- .End .tab-pane -->
                                        </div><!-- End .tab-content -->
                                    </div><!-- End .form-tab -->
                                </div><!-- End .form-box -->
                            </div><!-- End .modal-body -->
                        </div><!-- End .modal-content -->
                    </div><!-- End .modal-dialog -->
                </div><!-- End .modal -->

                <!-- login and registration end -->


                <div class="header-middle">
                    <div class="container">
                        <div class="header-left">
                            <button class="mobile-menu-toggler">
                                <span class="sr-only">Toggle mobile menu</span>
                                <i class="icon-bars"></i>
                            </button>

                            <a href="index.html" class="logo">
                                <img src="assets/newimages/logo.png" alt="Shoeazy Logo" width="150" height="25">
                            </a>
                        </div><!-- End .header-left -->

                        <div class="header-center">
                            <div class="header-search header-search-extended header-search-visible d-none d-lg-block">
                                <a href="#" class="search-toggle" role="button"><i class="icon-search"></i></a>
                                <form action="#" method="get">
                                    <div class="header-search-wrapper search-wrapper-wide">
                                        <label for="q" class="sr-only">Search</label>
                                        <button class="btn btn-primary" type="submit"><i
                                                class="icon-search"></i></button>
                                        <input type="search" class="form-control" name="q" id="q"
                                            placeholder="Search product ..." required>
                                    </div><!-- End .header-search-wrapper -->
                                </form>
                            </div><!-- End .header-search -->
                        </div>

                        <div class="header-right">




                            <div class="wishlist">
                                <a href="wishlist.html" title="Wishlist">
                                    <div class="icon">
                                        <i class="icon-heart-o"></i>
                                        <!-- <span class="wishlist-count badge">3</span> -->
                                    </div>
                                    <p>Wishlist</p>
                                </a>
                            </div><!-- End .compare-dropdown -->






                            <div class="dropdown cart-dropdown">
                                <a href="#" class="dropdown-toggle" role="button" data-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false" data-display="static">
                                    <div class="icon">
                                        <i class="icon-shopping-cart"></i>
                                        <!-- <span class="cart-count">2</span> -->
                                    </div>
                                    <p>Cart</p>
                                </a>








                                <div class="dropdown-menu dropdown-menu-right">
                                    <div class="dropdown-cart-products">
                                        <!-- <div class="product">
                                            <div class="product-cart-details">
                                                <h4 class="product-title">
                                                    <a href="product.html">Beige knitted elastic runner shoes</a>
                                                </h4>

                                                <span class="cart-product-info">
                                                    <span class="cart-product-qty">1</span>
                                                    x $84.00
                                                </span>
                                            </div><!-- End .product-cart-details -->





                                            <!-- <figure class="product-image-container">
                                                <a href="product.html" class="product-image">
                                                    <img src="assets/images/products/cart/product-1.jpg" alt="product">
                                                </a>
                                            </figure>
                                            <a href="#" class="btn-remove" title="Remove Product"><i
                                                    class="icon-close"></i></a>
                                        </div>  -->

                                        <!-- <div class="product">
                                            <div class="product-cart-details">
                                                <h4 class="product-title">
                                                    <a href="product.html">Blue utility pinafore denim dress</a>
                                                </h4>

                                                <span class="cart-product-info">
                                                    <span class="cart-product-qty">1</span>
                                                    x $76.00
                                                </span>
                                            </div> -->
                                            <!-- End .product-cart-details -->

                                            <!-- <figure class="product-image-container">
                                                <a href="product.html" class="product-image">
                                                    <img src="assets/images/products/cart/product-2.jpg" alt="product">
                                                </a>
                                            </figure>
                                            <a href="#" class="btn-remove" title="Remove Product"><i
                                                    class="icon-close"></i></a>
                                        </div>
                                    </div> -->
                                    <!-- End .cart-product -->

                                    <div class="dropdown-cart-total">
                                        <span>Total</span>

                                        <!-- <span class="cart-total-price">$160.00</span> -->
                                    </div><!-- End .dropdown-cart-total -->

                                    <div class="dropdown-cart-action">
                                        <a href="cart.html" class="btn btn-primary">View Cart</a>
                                        <a href="checkout.html"
                                            class="btn btn-outline-primary-2"><span>Checkout</span><i
                                                class="icon-long-arrow-right"></i></a>
                                    </div><!-- End .dropdown-cart-total -->
                                </div><!-- End .dropdown-menu -->
                            </div><!-- End .cart-dropdown -->
                        </div><!-- End .header-right -->
                    </div><!-- End .container -->
                </div><!-- End .header-middle -->

                <div class="header-bottom sticky-header">
                    <div class="container">
                        <div class="header-left">

                        </div><!-- End .header-left -->

                        <div class="header-center">
                            <nav class="main-nav">
                                <ul class="menu sf-arrows">

                                    <li>
                                        <a href="category.html" class="sf-with-ul">Account</a>

                                        <div class="megamenu megamenu-md">
                                            <div class="row no-gutters">
                                                <div class="col-md-8">
                                                    <div class="menu-col">
                                                        <div class="row">


                                                            <div class="col-md-6">

                                                                <ul>
                                                                    <li><a href="dashboard.html">My Account</a></li>
                                                                </ul>
                                                            </div><!-- End .col-md-6 -->
                                                        </div><!-- End .row -->
                                                    </div><!-- End .menu-col -->
                                                </div><!-- End .col-md-8 -->


                                            </div><!-- End .row -->
                                        </div><!-- End .megamenu megamenu-md -->
                                    </li>
                                </ul>
                                </li>
                                </ul><!-- End .menu -->
                            </nav><!-- End .main-nav -->
                        </div><!-- End .header-center -->

                        <div class="header-right">
                            <i class="la la-lightbulb-o"></i>
                            <p>Clearance<span class="highlight">&nbsp;Up to 30% Off</span></p>
                        </div>
                    </div><!-- End .container -->
                </div><!-- End .header-bottom -->
            </header><!-- End .header -->

            <main class="main">
                <div class="intro-slider-container mb-5">
                    <div class="intro-slider owl-carousel owl-theme owl-nav-inside owl-light" data-toggle="owl"
                        data-owl-options='{
                        "dots": true,
                        "nav": false, 
                        "responsive": {
                            "1200": {
                                "nav": true,
                                "dots": false
                            }
                        }
                    }'>
                        <div class="intro-slide"
                            style="background-image: url(assets/images/demos/demo-4/slider/slide-1.png);">
                            <div class="container intro-content">
                                <div class="row justify-content-end">
                                    <div class="col-auto col-sm-7 col-md-6 col-lg-5">
                                        <h3 class="intro-subtitle text-third"></h3>
                                        <!-- End .h3 intro-subtitle -->
                                        <h1 class="intro-title"></h1>
                                        <h1 class="intro-title"></h1><!-- End .intro-title -->

                                       

                                        
                                    </div><!-- End .col-lg-11 offset-lg-1 -->
                                </div><!-- End .row -->
                            </div><!-- End .intro-content -->
                        </div><!-- End .intro-slide -->

                       
                    </div><!-- End .intro-slider owl-carousel owl-simple -->

                    <span class="slider-loader"></span><!-- End .slider-loader -->
                </div><!-- End .intro-slider-container -->
                <!-- End .cat-blocks-container -->
                <div class="mb-4"></div><!-- End .mb-4 -->

                <!-- End .container -->

                <!-- End .heading -->

                <div class="mb-6"></div><!-- End .mb-6 -->

                <div class="mb-4"></div><!-- End .mb-4 -->

                <div class="container">
                    <hr class="mb-0">
                </div><!-- End .container -->

                <div class="icon-boxes-container bg-transparent">
                    <div class="container">
                        <div class="row">
                            <div class="col-sm-6 col-lg-3">
                                <div class="icon-box icon-box-side">
                                    <span class="icon-box-icon text-dark">
                                        <i class="icon-rocket"></i>
                                    </span>
                                    <div class="icon-box-content">
                                        <h3 class="icon-box-title">Free Shipping</h3><!-- End .icon-box-title -->
                                        <p>Orders $50 or more</p>
                                    </div><!-- End .icon-box-content -->
                                </div><!-- End .icon-box -->
                            </div><!-- End .col-sm-6 col-lg-3 -->

                            <div class="col-sm-6 col-lg-3">
                                <div class="icon-box icon-box-side">
                                    <span class="icon-box-icon text-dark">
                                        <i class="icon-rotate-left"></i>
                                    </span>

                                    <div class="icon-box-content">
                                        <h3 class="icon-box-title">Free Returns</h3><!-- End .icon-box-title -->
                                        <p>Within 30 days</p>
                                    </div><!-- End .icon-box-content -->
                                </div><!-- End .icon-box -->
                            </div><!-- End .col-sm-6 col-lg-3 -->

                            <div class="col-sm-6 col-lg-3">
                                <div class="icon-box icon-box-side">
                                    <span class="icon-box-icon text-dark">
                                        <i class="icon-info-circle"></i>
                                    </span>

                                    <div class="icon-box-content">
                                        <h3 class="icon-box-title">Get 20% Off 1 Item</h3><!-- End .icon-box-title -->
                                        <p>when you sign up</p>
                                    </div><!-- End .icon-box-content -->
                                </div><!-- End .icon-box -->
                            </div><!-- End .col-sm-6 col-lg-3 -->

                            <div class="col-sm-6 col-lg-3">
                                <div class="icon-box icon-box-side">
                                    <span class="icon-box-icon text-dark">
                                        <i class="icon-life-ring"></i>
                                    </span>

                                    <div class="icon-box-content">
                                        <h3 class="icon-box-title">We Support</h3><!-- End .icon-box-title -->
                                        <p>24/7 amazing services</p>
                                    </div><!-- End .icon-box-content -->
                                </div><!-- End .icon-box -->
                            </div><!-- End .col-sm-6 col-lg-3 -->
                        </div><!-- End .row -->
                    </div><!-- End .container -->
                </div><!-- End .icon-boxes-container -->
            </main><!-- End .main -->

            <footer class="footer">
                <div class="cta bg-image bg-dark pt-4 pb-5 mb-0"
                    style="background-image: url(assets/images/demos/demo-4/bg-5.jpg);">
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-sm-10 col-md-8 col-lg-6">
                                <div class="cta-heading text-center">
                                    <h3 class="cta-title text-white">Get The Latest Deals</h3><!-- End .cta-title -->
                                    <p class="cta-desc text-white">and receive <span class="font-weight-normal">$20
                                            coupon</span> for first shopping</p><!-- End .cta-desc -->
                                </div><!-- End .text-center -->

                                <form action="#">
                                    <div class="input-group input-group-round">
                                        <input type="email" class="form-control form-control-white"
                                            placeholder="Enter your Email Address" aria-label="Email Adress" required>
                                        <div class="input-group-append">
                                            <button class="btn btn-primary" type="submit"><span>Subscribe</span><i
                                                    class="icon-long-arrow-right"></i></button>
                                        </div><!-- .End .input-group-append -->
                                    </div><!-- .End .input-group -->
                                </form>
                            </div><!-- End .col-sm-10 col-md-8 col-lg-6 -->
                        </div><!-- End .row -->
                    </div><!-- End .container -->
                </div><!-- End .cta -->
                <div class="footer-middle">
                    <div class="container">
                        <div class="row">
                            <div class="col-sm-6 col-lg-3">
                                <div class="widget widget-about">
                                    <img src="assets/newimages/logo.png" class="footer-logo"
                                        alt="Footer Logo" width="150" height="25">
                                    <p>Praesent dapibus, neque id cursus ucibus, tortor neque egestas augue, eu
                                        vulputate magna eros eu erat. </p>

                                    <div class="widget-call">
                                        <i class="icon-phone"></i>
                                        Got Question? Call us 24/7
                                        <a href="tel:#">+0123 456 789</a>
                                    </div><!-- End .widget-call -->
                                </div><!-- End .widget about-widget -->
                            </div><!-- End .col-sm-6 col-lg-3 -->

                            <div class="col-sm-6 col-lg-3">
                                <div class="widget">
                                    <h4 class="widget-title">Useful Links</h4><!-- End .widget-title -->

                                    <ul class="widget-list">
                                        <li><a href="about.html">About shopEazy</a></li>
                                        <li><a href="#">Our Services</a></li>
                                        <li><a href="#">How to shop on shopEazy</a></li>
                                        <li><a href="faq.html">FAQ</a></li>
                                        <li><a href="contact.html">Contact us</a></li>
                                    </ul><!-- End .widget-list -->
                                </div><!-- End .widget -->
                            </div><!-- End .col-sm-6 col-lg-3 -->

                            <div class="col-sm-6 col-lg-3">
                                <div class="widget">
                                    <h4 class="widget-title">Customer Service</h4><!-- End .widget-title -->

                                    <ul class="widget-list">
                                        <li><a href="#">Payment Methods</a></li>
                                        <li><a href="#">Money-back guarantee!</a></li>
                                        <li><a href="#">Returns</a></li>
                                        <li><a href="#">Shipping</a></li>
                                        <li><a href="#">Terms and conditions</a></li>
                                        <li><a href="#">Privacy Policy</a></li>
                                    </ul><!-- End .widget-list -->
                                </div><!-- End .widget -->
                            </div><!-- End .col-sm-6 col-lg-3 -->

                            <div class="col-sm-6 col-lg-3">
                                <div class="widget">
                                    <h4 class="widget-title">My Account</h4><!-- End .widget-title -->

                                    <ul class="widget-list">
                                        <li><a href="#">Sign In</a></li>
                                        <li><a href="cart.html">View Cart</a></li>
                                        <li><a href="#">My Wishlist</a></li>
                                        <li><a href="#">Track My Order</a></li>
                                        <li><a href="#">Help</a></li>
                                    </ul><!-- End .widget-list -->
                                </div><!-- End .widget -->
                            </div><!-- End .col-sm-6 col-lg-3 -->
                        </div><!-- End .row -->
                    </div><!-- End .container -->
                </div><!-- End .footer-middle -->

                <div class="footer-bottom">
                    <div class="container">
                        <p class="footer-copyright">Copyright Â© 2024 shopEazy Store. All Rights Reserved.</p>
                        <!-- End .footer-copyright -->
                        <figure class="footer-payments">
                            <img src="assets/images/payments.png" alt="Payment methods" width="272" height="20">
                        </figure><!-- End .footer-payments -->
                    </div><!-- End .container -->
                </div><!-- End .footer-bottom -->
            </footer><!-- End .footer -->
        </div><!-- End .page-wrapper -->
        <button id="scroll-top" title="Back to Top"><i class="icon-arrow-up"></i></button>

        <!-- Mobile Menu -->
        <div class="mobile-menu-overlay"></div><!-- End .mobil-menu-overlay -->

        <div class="mobile-menu-container mobile-menu-light">
            <div class="mobile-menu-wrapper">
                <span class="mobile-menu-close"><i class="icon-close"></i></span>

                <form action="#" method="get" class="mobile-search">
                    <label for="mobile-search" class="sr-only">Search</label>
                    <input type="search" class="form-control" name="mobile-search" id="mobile-search"
                        placeholder="Search in..." required>
                    <button class="btn btn-primary" type="submit"><i class="icon-search"></i></button>
                </form>

                <ul class="nav nav-pills-mobile nav-border-anim" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" id="mobile-menu-link" data-toggle="tab" href="#mobile-menu-tab"
                            role="tab" aria-controls="mobile-menu-tab" aria-selected="true">Menu</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="mobile-cats-link" data-toggle="tab" href="#mobile-cats-tab" role="tab"
                            aria-controls="mobile-cats-tab" aria-selected="false">Categories</a>
                    </li>
                </ul>

                <div class="tab-content">
                    <div class="tab-pane fade show active" id="mobile-menu-tab" role="tabpanel"
                        aria-labelledby="mobile-menu-link">
                        <nav class="mobile-nav">
                            <ul class="mobile-menu">
                                
                                <li>
                                    <a href="category.html">Shop</a>
                                    <ul>
                                        <li><a href="category-list.html">sample</a></li>
                                        <li><a href="category-2cols.html">Sample2</a></li>
                                       
                                    </ul>
                                </li>
                                <li>
                                    <a href="product.html" class="sf-with-ul">Product</a>
                                    <ul>
                                        <li><a href="product.html">Sample</a></li>
                                        <li><a href="product-centered.html">Sample2</a></li>
                                       
                                    </ul>
                                </li>
                                <!-- <li>
                                    <a href="#">Pages</a>
                                    <ul>
                                        <li>
                                            <a href="about.html">About</a>

                                            <ul>
                                                <li><a href="about.html">About 01</a></li>
                                                <li><a href="about-2.html">About 02</a></li>
                                            </ul>
                                        </li>
                                        <li>
                                            <a href="contact.html">Contact</a>

                                            <ul>
                                                <li><a href="contact.html">Contact 01</a></li>
                                                <li><a href="contact-2.html">Contact 02</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="login.html">Login</a></li>
                                        <li><a href="faq.html">FAQs</a></li>
                                        <li><a href="404.html">Error 404</a></li>
                                        <li><a href="coming-soon.html">Coming Soon</a></li>
                                    </ul>
                                </li>-->
                              
                                <li>
                                    <a href="elements-list.html">Elements</a>
                                    <ul>
                                        
                            </ul>
                        </nav><!-- End .mobile-nav -->
                    </div><!-- .End .tab-pane -->
                    <div class="tab-pane fade" id="mobile-cats-tab" role="tabpanel" aria-labelledby="mobile-cats-link">
                        <nav class="mobile-cats-nav">
                            <ul class="mobile-cats-menu">
                                <li><a class="mobile-cats-lead" href="#">Daily offers</a></li>
                                <li><a class="mobile-cats-lead" href="#">Gift Ideas</a></li>
                               
                            </ul><!-- End .mobile-cats-menu -->
                        </nav><!-- End .mobile-cats-nav -->
                    </div><!-- .End .tab-pane -->
                </div><!-- End .tab-content -->

                <div class="social-icons">
                    <a href="#" class="social-icon" target="_blank" title="Instagram"><i class="icon-instagram"></i></a>
                    <a href="#" class="social-icon" target="_blank" title="Youtube"><i class="icon-youtube"></i></a>
                </div><!-- End .social-icons -->
            </div><!-- End .mobile-menu-wrapper -->
        </div><!-- End .mobile-menu-container -->

        <!-- Sign in / Register Modal -->
        <script>
           //sign in validation
                document.addEventListener('DOMContentLoaded', function() {
                    const form = document.getElementById('login-form');
                    const emailInput = document.getElementById('singin-email');
                    const passwordInput = document.getElementById('singin-password');

                    form.addEventListener('submit', function(event) {
                        let isValid = true;

                        // Clear previous error messages
                        clearErrors();

                        // Validate email/username
                        if (emailInput.value.trim() === '') {
                            showError(emailInput, 'Email or username is required');
                            isValid = false;
                        } else if (emailInput.value.includes('@') && !isValidEmail(emailInput.value)) {
                            showError(emailInput, 'Please enter a valid email address');
                            isValid = false;
                        }

                        // Validate password
                        if (passwordInput.value.trim() === '') {
                            showError(passwordInput, 'Password is required');
                            isValid = false;
                        }

                        if (!isValid) {
                            event.preventDefault();
                        }
                    });

                    function showError(input, message) {
                        const formGroup = input.closest('.form-group');
                        const error = document.createElement('div');
                        error.className = 'error-message';
                        error.style.color = 'red';
                        error.textContent = message;
                        formGroup.appendChild(error);
                    }

                    function clearErrors() {
                        const errorMessages = form.querySelectorAll('.error-message');
                        errorMessages.forEach(error => error.remove());
                    }

                    function isValidEmail(email) {
                        const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                        return re.test(String(email).toLowerCase());
                    }
                });


            //register validation
            document.addEventListener('DOMContentLoaded', function() {
                
                const form = document.getElementById('signup-form');
                const nameInput = document.getElementById('register-name');
                const emailInput = document.getElementById('register-email');
                const passwordInput = document.getElementById('register-password0');
                const confirmPasswordInput = document.getElementById('register-password');
                emailInput.addEventListener('blur', async function() {
                        if (isValidEmail(emailInput.value)) {
                            const isEmailTaken = await checkEmailExists(emailInput.value);
                            if (isEmailTaken) {
                                showError(emailInput, 'This email is already registered');
                            } else {
                                clearError(emailInput);
                            }
                        }
                    });

                    async function checkEmailExists(email) {
                        try {
                            const response = await fetch('/check-email', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                },
                                body: JSON.stringify({ email }),
                            });
                            const data = await response.json();
                            return data.exists;
                        } catch (error) {
                            console.error('Error checking email:', error);
                            return false;
                        }
                    }

                    function clearError(input) {
                        const formGroup = input.closest('.form-group');
                        const existingError = formGroup.querySelector('.error-message');
                        if (existingError) {
                            existingError.remove();
                        }
                    }
                                
            
                form.addEventListener('submit', function(event) {
                    let isValid = true;
            
                    // Clear previous error messages
                    clearErrors();
            
                    // Validate name
                    if (nameInput.value.trim() === '') {
                        showError(nameInput, 'Name is required');
                        isValid = false;
                    }
            
                    // Validate email
                    if (!isValidEmail(emailInput.value)) {
                        showError(emailInput, 'Please enter a valid email address');
                        isValid = false;
                    }
            
                    // Validate password
                    if (passwordInput.value.length < 8) {
                        showError(passwordInput, 'Password must be at least 8 characters long');
                        isValid = false;
                    }
            
                    // Validate password confirmation
                    if (passwordInput.value !== confirmPasswordInput.value) {
                        showError(confirmPasswordInput, 'Passwords do not match');
                        isValid = false;
                    }
            
                    if (!isValid) {
                        event.preventDefault();
                    }
                });
            
                function showError(input, message) {
                    const formGroup = input.closest('.form-group');
                    const error = document.createElement('div');
                    error.className = 'error-message';
                    error.style.color = 'red';
                    error.textContent = message;
                    formGroup.appendChild(error);
                }
            
                function clearErrors() {
                    const errorMessages = form.querySelectorAll('.error-message');
                    errorMessages.forEach(error => error.remove());
                }
            
                function isValidEmail(email) {
                    const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                    return re.test(String(email).toLowerCase());
                }

            });
                        form.addEventListener('submit', async function(event) {
                event.preventDefault(); // Prevent default form submission

                // Clear previous error messages
                clearErrors();

                // Perform all validations
                let isValid = validateForm(); // Implement this based on your existing validation logic

                // Check email existence again before submission
                if (isValid && isValidEmail(emailInput.value)) {
                    const isEmailTaken = await checkEmailExists(emailInput.value);
                    if (isEmailTaken) {
                        showError(emailInput, 'This email is already registered');
                        isValid = false;
                    }
                }

                if (isValid) {
                    // If all validations pass, submit the form
                    this.submit();
                }
            });
            </script>

        <!-- Plugins JS File -->
        <script src="assets/js/jquery.min.js"></script>
        <script src="assets/js/bootstrap.bundle.min.js"></script>
        <script src="assets/js/jquery.hoverIntent.min.js"></script>
        <script src="assets/js/jquery.waypoints.min.js"></script>
        <script src="assets/js/superfish.min.js"></script>
        <script src="assets/js/owl.carousel.min.js"></script>
        <script src="assets/js/bootstrap-input-spinner.js"></script>
        <script src="assets/js/jquery.plugin.min.js"></script>
        <script src="assets/js/jquery.magnific-popup.min.js"></script>
        <script src="assets/js/jquery.countdown.min.js"></script>
        <!-- Main JS File -->
        <script src="assets/js/main.js"></script>
        <script src="assets/js/demos/demo-4.js"></script>
    </body>


    <%- include('../layouts/footer.ejs') %>